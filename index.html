<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üöó Mock Infotainment System</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f5f5f5;
        padding: 20px;
        color: #333;
    }
    h1 { color: #2c3e50; }
    section {
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0px 2px 8px rgba(0,0,0,0.1);
    }
    input[type=number], input[type=text], select {
        padding: 5px;
        margin: 5px 0 10px 0;
        width: 80px;
    }
    button {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        background: #2980b9;
        color: white;
        cursor: pointer;
        margin-right: 5px;
    }
    button:hover {
        background: #3498db;
    }
    label {
        margin-right: 10px;
    }
</style>
</head>
<body>
<h1>üöó Infotainment System</h1>

<section id="climateSection">
    <h2>üå°Ô∏è Climate Control</h2>
    <label for="driverTemp">Driver Temp:</label>
    <input id="driverTemp" type="number" value="22" min="16" max="30"><br>
    
    <label for="passengerTemp">Passenger Temp:</label>
    <input id="passengerTemp" type="number" value="22" min="16" max="30"><br>
    
    <label for="fanSpeed">Fan Speed:</label>
    <input id="fanSpeed" type="number" value="3" min="0" max="10"><br>
    
    <label for="climateMode">Mode:</label>
    <select id="climateMode">
        <option value="AUTO">AUTO</option>
        <option value="MANUAL">MANUAL</option>
        <option value="ECO">ECO</option>
    </select>
    <button onclick="updateClimate()">Apply</button>
    <p id="climateStatus"></p>
</section>

<section id="mediaSection">
    <h2>üéµ Media</h2>
    <button onclick="togglePlay()">Play / Pause</button>
    <label for="volume">Volume:</label>
    <input id="volume" type="number" value="10" min="0" max="100">
    <button onclick="setVolume()">Set</button>
    <p id="mediaStatus"></p>
</section>

<section id="navigationSection">
    <h2>üó∫Ô∏è Navigation</h2>
    <label for="destination">Destination:</label>
    <input id="destination" type="text">
    <button onclick="setDestination()">Start</button>
    <button onclick="stopNavigation()">Stop</button>
    <p id="navigationStatus"></p>
</section>

<script>
const BASE = "http://127.0.0.1:8000/api";

async function updateClimate() {
    const data = {
        driver_temp: parseInt(driverTemp.value),
        passenger_temp: parseInt(passengerTemp.value),
        fan_speed: parseInt(fanSpeed.value),
        mode: climateMode.value
    };
    const res = await fetch(`${BASE}/climate/update`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });
    const json = await res.json();
    document.getElementById('climateStatus').innerText = `Driver: ${json.driver_temp}¬∞C, Passenger: ${json.passenger_temp}¬∞C, Fan: ${json.fan_speed}, Mode: ${json.mode}`;
}

async function togglePlay() {
    const res = await fetch(`${BASE}/media/play_pause`, { method: "POST" });
    const json = await res.json();
    document.getElementById('mediaStatus').innerText = `Playing: ${json.is_playing}, Volume: ${json.volume}`;
}

async function setVolume() {
    const res = await fetch(`${BASE}/media/volume/${volume.value}`, { method: "POST" });
    const json = await res.json();
    document.getElementById('mediaStatus').innerText = `Playing: ${json.is_playing}, Volume: ${json.volume}`;
}

async function setDestination() {
    const res = await fetch(`${BASE}/navigation/set_destination?destination=${destination.value}`, { method: "POST" });
    const json = await res.json();
    document.getElementById('navigationStatus').innerText = `Destination: ${json.destination}, ETA: ${json.eta_minutes} min, Navigating: ${json.is_navigating}`;
}

async function stopNavigation() {
    const res = await fetch(`${BASE}/navigation/stop`, { method: "POST" });
    const json = await res.json();
    document.getElementById('navigationStatus').innerText = `Destination: ${json.destination}, Navigating: ${json.is_navigating}`;
}
</script>
</body>
</html>
